<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>CCS3折纸效果</title>
    <style>
        *{margin: 0;padding: 0;}
        #wrap{width: 100vw;margin: 0px auto; position: relative;-webkit-perspective: 800px;}
        #wrap h2{height: 40px; background: #f60; color: #fff; font: 16px/40px "微软雅黑"; text-align: center;position: relative;z-index: 90;}
        #wrap div{position: absolute;top: 32px;width: 100%;left: 0;-webkit-transform-style: preserve-3d; -webkit-transform-origin: top;
        -webkit-transform: rotateX(-120deg);}
        #wrap span{display: block;height: 30px;background: #9f0;font: 12px/30px "宋体"; color: #fff; text-align: center;box-shadow: inset 0 0 0 20px rgba(0, 0, 0, 1); transition: 1s;}
        #wrap>div{top: 40px;}
        @-webkit-keyframes open{
            0%{-webkit-transform: rotateX(-120deg);}
            25%{-webkit-transform: rotateX(30deg);}
            50%{-webkit-transform: rotateX(-15deg);}
            75%{-webkit-transform: rotateX(8deg);}
            100%{-webkit-transform: rotateX(0deg);}
        }
        @-webkit-keyframes clos{
            0%{-webkit-transform: rotateX(0deg);}
            100%{-webkit-transform: rotateX(-120deg);}
        }
        #wrap .show{-webkit-animation: 1.2s open; -webkit-transform: rotateX(0deg)}
        #wrap .show>span{box-shadow: inset 0 0 0 20px rgba(0, 0, 0, 0);}
        #wrap .hide{-webkit-animation: 1s clos; -webkit-transform: rotateX(-120deg)}
        #wrap .hide>span{box-shadow: inset 0 0 0 20px rgba(0, 0, 0, 1);}
        
    </style>
</head>
<body>
    <div id="wrap">
        <h2 id="btn">我是标题</h2>
        <div>
            <span>选项1</span>
            <div>
                <span>选项2</span>
                <div>
                    <span>选项3</span>
                    <div>
                        <span>选项4</span>
                        <div>
                            <span>选项5</span>
                            <div>
                                <span>选项6</span>
                                <div>
                                    <span>选项7</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var falg = true;
        var iDelay =200;
        var oTime = null;
        var i = 0;
        var btn = document.getElementById('btn');
        var oWrap = document.getElementById("wrap");
        var aDiv = oWrap.getElementsByTagName("div");
        btn.addEventListener("touchend", function(){
            if(oTime){
                return;
            }
            if(falg){
                // for(var i=0; i<aDiv.length; i++){
                //     aDiv[i].className="show";
                // }
                i=0;
                oTime = setInterval(function(){
                    aDiv[i].className="show";
                    i++;
                    if(i===aDiv.length){
                        clearInterval(oTime);
                        oTime = null;
                    }
                },iDelay)
            }else{
                i=aDiv.length-1;
                oTime = setInterval(function(){
                    aDiv[i].className="hide";
                    i--;
                    if(i<0){
                        clearInterval(oTime);
                        oTime = null;
                    }
                },iDelay)
            }
            falg = !falg;
        },false)
    </script>
</body>
</html>